const clusters = [
  {
    key: "ИТ",
    title: "Информационные технологии",
    specialties: [
      "Информационные системы и программирование",
      "Веб-разработка",
      "Кибербезопасность",
      "Интеллектуальные интегрированные системы",
    ],
  },
  {
    key: "Здравоохранение",
    title: "Здравоохранение",
    specialties: [
      "Сестринское дело",
      "Лабораторная диагностика",
      "Фармация",
      "Медицинская оптика",
    ],
  },
  {
    key: "Гостеприимство",
    title: "Гостеприимство",
    specialties: [
      "Гостиничное дело",
      "Туризм и гостеприимство",
      "Ресторанный сервис",
    ],
  },
  {
    key: "Безопасность и право",
    title: "Безопасность и право",
    specialties: [
      "Правоохранительная деятельность",
      "Юриспруденция",
      "Пожарная безопасность",
      "Документационное обеспечение",
    ],
  },
  {
    key: "Креативные индустрии",
    title: "Креативные индустрии",
    specialties: [
      "Дизайн",
      "Графический дизайнер",
      "Издательское дело",
      "Реклама и маркетинг",
    ],
  },
  {
    key: "Образование и социальная сфера",
    title: "Образование и социальная сфера",
    specialties: [
      "Дошкольное образование",
      "Преподавание в начальных классах",
      "Социальная работа",
      "Психология",
    ],
  },
  {
    key: "Промышленность",
    title: "Промышленность",
    specialties: [
      "Машиностроение",
      "Аддитивные технологии",
      "Металлургия",
    ],
  },
  {
    key: "Строительство",
    title: "Строительство",
    specialties: [
      "Архитектура",
      "Строительство и эксплуатация зданий",
      "Геодезия и картография",
      "Дизайн архитектурной среды",
    ],
  },
  {
    key: "Транспорт",
    title: "Транспорт",
    specialties: [
      "Логистика",
      "Техническое обслуживание автомобилей",
      "Автоматика на транспорте",
      "Управление движением",
    ],
  },
  {
    key: "Финансы и торговля",
    title: "Финансы и торговля",
    specialties: [
      "Банковское дело",
      "Экономика и бухгалтерский учет",
      "Коммерция",
      "Страховое дело",
    ],
  },
];

const colleges = [
  // ИТ - 6 колледжей
  {
    cluster: "ИТ",
    specialty: ["Информационные системы и программирование", "Веб-разработка", "Кибербезопасность", "Интеллектуальные интегрированные системы"],
    name: "ГБПОУ МГКЭИТ",
    description: "Московский государственный колледж электромеханики и информационных технологий.",
    address: "г. Москва, ул. Академика Миллионщикова, 20",
  },
  {
    cluster: "ИТ",
    specialty: ["Информационные системы и программирование"],
    name: "Колледж связи №54 имени П.М. Вострухина",
    description: "Один из старейших колледжей в области информационных технологий и телекоммуникаций.",
    address: "г. Москва, ул. Большие Каменщики, 7",
  },
  {
    cluster: "ИТ",
    specialty: ["Информационные системы и программирование", "Веб-разработка"],
    name: "Колледж автоматизации и информационных технологий №20",
    description: "Подготовка специалистов в области программирования и системного администрирования.",
    address: "г. Москва, ул. Молдагуловой, 20",
  },
  {
    cluster: "ИТ",
    specialty: ["Информационные системы и программирование", "Веб-разработка"],
    name: "Технологический колледж №24",
    description: "Современный колледж с углубленным изучением IT-технологий.",
    address: "г. Москва, ул. Вилиса Лациса, 29",
  },
  {
    cluster: "ИТ",
    specialty: ["Кибербезопасность"],
    name: "Московский колледж защиты информации",
    description: "Готовит специалистов по информационной безопасности.",
    address: "г. Москва, ул. Стромынка, 18",
  },
  {
    cluster: "ИТ",
    specialty: ["Веб-разработка"],
    name: "Московский приборостроительный техникум РЭА им. Г.В. Плеханова",
    description: "Готовит разработчиков web-приложений и специалистов по компьютерной графике.",
    address: "г. Москва, ул. Верхняя Красносельская, 38",
  },
  
  // Здравоохранение - 7 колледжей
  {
    cluster: "Здравоохранение",
    specialty: ["Сестринское дело"],
    name: "Медицинский колледж №1",
    description: "Старейший медицинский колледж Москвы с высококвалифицированными преподавателями.",
    address: "г. Москва, ул. Бауманская, 33",
  },
  {
    cluster: "Здравоохранение",
    specialty: ["Сестринское дело"],
    name: "Медицинский колледж №2",
    description: "Подготовка медицинских сестер для работы в клиниках Москвы.",
    address: "г. Москва, ул. Щипок, 12",
  },
  {
    cluster: "Здравоохранение",
    specialty: ["Лабораторная диагностика"],
    name: "Медицинский колледж №5",
    description: "Готовит специалистов медико-лабораторной диагностики.",
    address: "г. Москва, ул. Пироговская, 11",
  },
  {
    cluster: "Здравоохранение",
    specialty: ["Лабораторная диагностика"],
    name: "Медицинский колледж №6",
    description: "Подготовка специалистов для клинико-диагностических лабораторий.",
    address: "г. Москва, ул. Клинская, 6",
  },
  {
    cluster: "Здравоохранение",
    specialty: ["Лабораторная диагностика"],
    name: "Медицинский колледж №7",
    description: "Готовит специалистов медико-лабораторной диагностики высшей категории.",
    address: "г. Москва, ул. Островитянова, 1",
  },
  {
    cluster: "Здравоохранение",
    specialty: ["Фармация"],
    name: "Московский фармацевтический колледж",
    description: "Специализируется на подготовке фармацевтов и технологов фармацевтического производства.",
    address: "г. Москва, ул. Сретенка, 29",
  },
  {
    cluster: "Здравоохранение",
    specialty: ["Медицинская оптика"],
    name: "Медицинский колледж оптики и офтальмологии",
    description: "Обучение оптиков-оптометристов и специалистов по коррекции зрения.",
    address: "г. Москва, ул. Садовническая, 57",
  },
  
  // Гостеприимство - 5 колледжей
  {
    cluster: "Гостеприимство",
    specialty: ["Гостиничное дело"],
    name: "Московский колледж управления, гостиничного бизнеса и информационных технологий «Царицыно»",
    description: "Готовит специалистов для гостиничной индустрии с практикой в ведущих отелях.",
    address: "г. Москва, ул. Луганская, 7",
  },
  {
    cluster: "Гостеприимство",
    specialty: ["Гостиничное дело", "Туризм и гостеприимство"],
    name: "Колледж индустрии гостеприимства и менеджмента №23",
    description: "Подготовка специалистов индустрии гостеприимства.",
    address: "г. Москва, ул. Большая Черкизовская, 34",
  },
  {
    cluster: "Гостеприимство",
    specialty: ["Туризм и гостеприимство"],
    name: "Колледж сферы услуг №3",
    description: "Обучение менеджеров туризма и гостиничного дела.",
    address: "г. Москва, ул. Набережная Академика Туполева, 15",
  },
  {
    cluster: "Гостеприимство",
    specialty: ["Ресторанный сервис"],
    name: "Пищевой колледж №33",
    description: "Обучение поваров и специалистов ресторанного бизнеса.",
    address: "г. Москва, ул. Годовикова, 1",
  },
  {
    cluster: "Гостеприимство",
    specialty: ["Ресторанный сервис"],
    name: "Технологический колледж №21",
    description: "Подготовка поваров и кондитеров международного класса.",
    address: "г. Москва, ул. Бауманская, 58",
  },
  
  // Безопасность и право - 5 колледжей
  {
    cluster: "Безопасность и право",
    specialty: ["Правоохранительная деятельность"],
    name: "Колледж полиции",
    description: "Подготовка сотрудников полиции с практикой в УВД Москвы.",
    address: "г. Москва, ул. Фабрициуса, 26",
  },
  {
    cluster: "Безопасность и право",
    specialty: ["Пожарная безопасность"],
    name: "Технический пожарно-спасательный колледж имени Героя РФ В.М. Максимчука",
    description: "Обучает специалистов пожарной безопасности и спасательных служб.",
    address: "г. Москва, ул. Верхняя Первомайская, 52",
  },
  {
    cluster: "Безопасность и право",
    specialty: ["Правоохранительная деятельность"],
    name: "Колледж имени Маршала В.И. Чуйкова",
    description: "Подготовка специалистов оборонных и правоохранительных структур.",
    address: "г. Москва, ул. Планетная, 37",
  },
  {
    cluster: "Безопасность и право",
    specialty: ["Юриспруденция"],
    name: "Юридический колледж",
    description: "Престижный юридический колледж с углубленным изучением права.",
    address: "г. Москва, ул. Садовая-Кудринская, 9",
  },
  {
    cluster: "Безопасность и право",
    specialty: ["Документационное обеспечение"],
    name: "Колледж делопроизводства",
    description: "Готовит специалистов по документационному обеспечению и архивоведению.",
    address: "г. Москва, ул. Онежская, 19",
  },
  
  // Креативные индустрии - 6 колледжей
  {
    cluster: "Креативные индустрии",
    specialty: ["Дизайн"],
    name: "Колледж Архитектуры, Дизайна и Реинжиниринга №26",
    description: "Ведущий колледж в области архитектуры, дизайна и информационных технологий.",
    address: "г. Москва, ул. Хабаровская, 4",
  },
  {
    cluster: "Креативные индустрии",
    specialty: ["Дизайн", "Графический дизайнер"],
    name: "Московский техникум креативных индустрий имени Л.Б. Красина",
    description: "Подготовка специалистов креативных индустрий и дизайна.",
    address: "г. Москва, ул. Красина, 18",
  },
  {
    cluster: "Креативные индустрии",
    specialty: ["Дизайн"],
    name: "Колледж декоративно-прикладного искусства имени Карла Фаберже",
    description: "Обучение дизайнеров декоративно-прикладного искусства.",
    address: "г. Москва, ул. Станиславского, 7",
  },
  {
    cluster: "Креативные индустрии",
    specialty: ["Графический дизайнер", "Реклама и маркетинг"],
    name: "Киноколледж №40 «Московская международная киношкола»",
    description: "Обучение специалистов кино, телевидения и мультимедиа.",
    address: "г. Москва, ул. Сретенка, 31",
  },
  {
    cluster: "Креативные индустрии",
    specialty: ["Издательское дело"],
    name: "Московский издательско-полиграфический колледж",
    description: "Готовит специалистов в области издательского дела и полиграфии.",
    address: "г. Москва, ул. Прянишникова, 2А",
  },
  {
    cluster: "Креативные индустрии",
    specialty: ["Реклама и маркетинг"],
    name: "Колледж малого бизнеса №4",
    description: "Обучение специалистов рекламного дела и маркетинговых коммуникаций.",
    address: "г. Москва, ул. Люблинская, 37",
  },
  
  // Образование и социальная сфера - 6 колледжей
  {
    cluster: "Образование и социальная сфера",
    specialty: ["Дошкольное образование"],
    name: "Педагогический колледж №1 имени К.Д. Ушинского",
    description: "Готовит воспитателей детских садов и специалистов дошкольного образования.",
    address: "г. Москва, ул. Малая Пироговская, 1",
  },
  {
    cluster: "Образование и социальная сфера",
    specialty: ["Дошкольное образование"],
    name: "Педагогический колледж №15",
    description: "Подготовка воспитателей с практикой в детских садах Москвы.",
    address: "г. Москва, ул. Биржевая, 12",
  },
  {
    cluster: "Образование и социальная сфера",
    specialty: ["Преподавание в начальных классах"],
    name: "Педагогический колледж №9 «Арбат»",
    description: "Готовит учителей начальных классов по современным образовательным технологиям.",
    address: "г. Москва, ул. Новый Арбат, 32",
  },
  {
    cluster: "Образование и социальная сфера",
    specialty: ["Преподавание в начальных классах"],
    name: "Педагогический колледж №18 «Митино»",
    description: "Обучение учителей начальных классов с углубленным изучением педагогики.",
    address: "г. Москва, ул. Митинская, 45",
  },
  {
    cluster: "Образование и социальная сфера",
    specialty: ["Социальная работа"],
    name: "Московский колледж социальной работы",
    description: "Готовит специалистов по социальной работе с населением.",
    address: "г. Москва, ул. Вильгельма Пика, 4",
  },
  {
    cluster: "Образование и социальная сфера",
    specialty: ["Психология"],
    name: "Социально-педагогический колледж",
    description: "Обучение педагогов-психологов для работы в образовательных учреждениях.",
    address: "г. Москва, ул. Хабаровская, 4",
  },
  
  // Промышленность - 6 колледжей
  {
    cluster: "Промышленность",
    specialty: ["Машиностроение"],
    name: "Московский политехнический колледж имени П.А. Овчинникова",
    description: "Готовит специалистов для машиностроительной промышленности.",
    address: "г. Москва, ул. Ивантеевская, 16",
  },
  {
    cluster: "Промышленность",
    specialty: ["Машиностроение"],
    name: "Колледж машиностроения и технологий имени С.П. Королёва",
    description: "Обучение токарей, фрезеровщиков и операторов станков с ЧПУ.",
    address: "г. Москва, ул. Малая Семёновская, 17",
  },
  {
    cluster: "Промышленность",
    specialty: ["Аддитивные технологии"],
    name: "Московский технологический колледж",
    description: "Современный колледж с изучением 3D-печати и аддитивных технологий.",
    address: "г. Москва, ул. Дубнинская, 18",
  },
  {
    cluster: "Промышленность",
    specialty: ["Металлургия"],
    name: "Колледж им. С.Ю. Витте",
    description: "Готовит специалистов в области металлургии и металлообработки.",
    address: "г. Москва, ул. Авиамоторная, 30",
  },
  {
    cluster: "Промышленность",
    specialty: ["Машиностроение"],
    name: "Политехнический колледж №8 имени дважды Героя Советского Союза И.Ф. Павлова",
    description: "Подготовка специалистов для автомобильной и машиностроительной промышленности.",
    address: "г. Москва, ул. Клары Цеткин, 33",
  },
  {
    cluster: "Промышленность",
    specialty: ["Аддитивные технологии"],
    name: "Колледж современных технологий имени Героя Советского Союза М.Ф. Панова",
    description: "Обучение работе на высокотехнологичном оборудовании.",
    address: "г. Москва, ул. Газопровод, 20",
  },
  
  // Строительство - 7 колледжей
  {
    cluster: "Строительство",
    specialty: ["Архитектура"],
    name: "Колледж архитектуры и строительства №7",
    description: "Подготовка архитекторов с практикой в проектных бюро Москвы.",
    address: "г. Москва, ул. Волгоградский пр., 46",
  },
  {
    cluster: "Строительство",
    specialty: ["Строительство и эксплуатация зданий"],
    name: "Московский строительный колледж №38",
    description: "Обучает строителей различных специальностей.",
    address: "г. Москва, ул. Талалихина, 28",
  },
  {
    cluster: "Строительство",
    specialty: ["Строительство и эксплуатация зданий"],
    name: "Строительный колледж №12",
    description: "Обучение каменщиков, отделочников и мастеров строительных работ.",
    address: "г. Москва, ул. Юности, 5",
  },
  {
    cluster: "Строительство",
    specialty: ["Геодезия и картография"],
    name: "Колледж геодезии и картографии МИИГАиК",
    description: "Готовит специалистов по землеустройству и геодезическим работам.",
    address: "г. Москва, ул. Гороховский пер., 4",
  },
  {
    cluster: "Строительство",
    specialty: ["Дизайн архитектурной среды"],
    name: "Колледж архитектурного дизайна",
    description: "Обучение дизайнеров архитектурной среды и ландшафтных дизайнеров.",
    address: "г. Москва, ул. Зеленая, 28",
  },
  {
    cluster: "Строительство",
    specialty: ["Строительство и эксплуатация зданий"],
    name: "Колледж градостроительства и сервиса №38",
    description: "Подготовка специалистов по эксплуатации и ремонту зданий.",
    address: "г. Москва, ул. Вильгельма Пика, 4",
  },
  {
    cluster: "Строительство",
    specialty: ["Архитектура"],
    name: "Московский архитектурно-строительный колледж",
    description: "Готовит архитекторов и проектировщиков с изучением современных CAD-систем.",
    address: "г. Москва, ул. Щипок, 26",
  },
  
  // Транспорт - 6 колледжей
  {
    cluster: "Транспорт",
    specialty: ["Логистика"],
    name: "Московский колледж транспорта",
    description: "Готовит логистов и диспетчеров для транспортных компаний.",
    address: "г. Москва, ул. Электрозаводская, 21",
  },
  {
    cluster: "Транспорт",
    specialty: ["Техническое обслуживание автомобилей"],
    name: "Московский автомобильно-дорожный колледж имени А.А. Николаева",
    description: "Обучает автомехаников и специалистов по ремонту автотранспорта.",
    address: "г. Москва, ул. Авиамоторная, 50",
  },
  {
    cluster: "Транспорт",
    specialty: ["Автоматика на транспорте"],
    name: "Московский колледж железнодорожного транспорта",
    description: "Готовит специалистов по автоматике и управлению на транспорте.",
    address: "г. Москва, ул. Кибальчича, 11",
  },
  {
    cluster: "Транспорт",
    specialty: ["Логистика"],
    name: "Колледж транспорта и логистики",
    description: "Обучение специалистов складской логистики и управления перевозками.",
    address: "г. Москва, ул. Римского-Корсакова, 8",
  },
  {
    cluster: "Транспорт",
    specialty: ["Управление движением"],
    name: "Колледж железнодорожного и городского транспорта",
    description: "Подготовка диспетчеров и специалистов управления движением.",
    address: "г. Москва, ул. Бутырская, 86",
  },
  {
    cluster: "Транспорт",
    specialty: ["Техническое обслуживание автомобилей"],
    name: "Автомеханический колледж",
    description: "Обучение автомехаников, мастеров кузовного ремонта и диагностов.",
    address: "г. Москва, ул. Ленинская Слобода, 19",
  },
  
  // Финансы и торговля - 7 колледжей
  {
    cluster: "Финансы и торговля",
    specialty: ["Банковское дело"],
    name: "Финансовый колледж №35",
    description: "Подготовка банковских специалистов и работников финансовых организаций.",
    address: "г. Москва, ул. Рязанский пр., 8",
  },
  {
    cluster: "Финансы и торговля",
    specialty: ["Экономика и бухгалтерский учет"],
    name: "Московский экономический колледж",
    description: "Обучает бухгалтеров, экономистов и специалистов налогового учета.",
    address: "г. Москва, ул. Газетный пер., 9",
  },
  {
    cluster: "Финансы и торговля",
    specialty: ["Коммерция"],
    name: "Московский торгово-экономический колледж",
    description: "Готовит специалистов в области торговли и коммерческой деятельности.",
    address: "г. Москва, ул. Столярный пер., 3",
  },
  {
    cluster: "Финансы и торговля",
    specialty: ["Коммерция"],
    name: "Колледж предпринимательства №11",
    description: "Обучение менеджеров по продажам и специалистов коммерческой деятельности.",
    address: "г. Москва, ул. Шереметьевская, 38",
  },
  {
    cluster: "Финансы и торговля",
    specialty: ["Страховое дело"],
    name: "Колледж страхования и финансов",
    description: "Готовит специалистов страхового дела и финансового планирования.",
    address: "г. Москва, ул. Таганская, 40",
  },
  {
    cluster: "Финансы и торговля",
    specialty: ["Экономика и бухгалтерский учет"],
    name: "Экономико-технологический колледж №22",
    description: "Обучение бухгалтеров и экономистов для предприятий всех форм собственности.",
    address: "г. Москва, ул. Нахимовский пр., 31",
  },
  {
    cluster: "Финансы и торговля",
    specialty: ["Банковское дело"],
    name: "Московский финансовый колледж Финансового университета",
    description: "Готовит банковских работников и специалистов финансового сектора с практикой в банках.",
    address: "г. Москва, ул. Мясницкая, 78",
  },
];

let activeCluster = null;
let activeSpecialty = null;

function renderClusterBar() {
  const bar = document.createElement("div");
  bar.className = "cluster-bar";

  if (!activeCluster) {
    const allBtn = document.createElement("button");
    allBtn.className = "active";
    allBtn.textContent = "Все отрасли";
    allBtn.onclick = () => {
      activeCluster = null;
      activeSpecialty = null;
      rerenderAll();
    };
    bar.appendChild(allBtn);

    clusters.forEach((cluster) => {
      const btn = document.createElement("button");
      btn.textContent = cluster.title;
      btn.onclick = () => {
        activeCluster = cluster.key;
        activeSpecialty = null;
        rerenderAll();
      };
      bar.appendChild(btn);
    });
  }

  return bar;
}

function renderSpecialtyBar() {
  const old = document.querySelector(".specialty-bar");
  if (old) old.remove();
  if (!activeCluster) return;

  const cluster = clusters.find((c) => c.key === activeCluster);
  if (!cluster) return;

  const bar = document.createElement("div");
  bar.className = "specialty-bar";

  const backBtn = document.createElement("button");
  backBtn.textContent = "← Все отрасли";
  backBtn.onclick = () => {
    activeCluster = null;
    activeSpecialty = null;
    rerenderAll();
  };
  bar.appendChild(backBtn);

  cluster.specialties.forEach((spec) => {
    const btn = document.createElement("button");
    btn.className = activeSpecialty === spec ? "active" : "";
    btn.textContent = spec;
    btn.onclick = () => {
      activeSpecialty = spec;
      rerenderAll();
    };
    bar.appendChild(btn);
  });

  document.querySelector(".top-area").appendChild(bar);
}

function renderCollegeCards() {
  const container = document.getElementById("cards-container");
  container.innerHTML = "";

  let filtered = colleges;
  if (activeCluster) {
    filtered = filtered.filter((c) => c.cluster === activeCluster);
  }

  if (activeSpecialty) {
    filtered = filtered.filter((c) => c.specialty.includes(activeSpecialty));
  }

  const countDiv = document.createElement("div");
  countDiv.className = "colleges-count";
  countDiv.textContent = `Показано колледжей: ${filtered.length}`;
  container.before(countDiv);

  if (filtered.length === 0) {
    container.innerHTML = '<p style="color: #86868b; padding: 20px;">Колледжи не найдены</p>';
    return;
  }

  filtered.forEach((college) => {
    const card = document.createElement("div");
    card.className = "college-card";
    card.innerHTML = `
      <h3>${college.name}</h3>
      <p>${college.description}</p>
      <address>${college.address}</address>
    `;
    container.appendChild(card);
  });
}

function rerenderAll() {
  document.querySelector(".cluster-bar")?.remove();
  document.querySelector(".colleges-count")?.remove();
  document.querySelector(".top-area").appendChild(renderClusterBar());
  renderSpecialtyBar();
  renderCollegeCards();
}

rerenderAll();
